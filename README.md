### Домашнее задание к занятию "5.2. Системы управления виртуализацией"

#### Задача 1

Выберите подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.

Сценарии:

- 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований
Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий
- Требуется наиболее производительное бесплатное opensource решение для виртуализации небольшой (20 серверов) инфраструктуры Linux и Windows виртуальных машин
- Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры
- Необходимо рабочее окружение для тестирование программного продукта на нескольких дистрибутивах Linux

***Ответ:***

- 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований
Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий
``` 
Microsoft Hyper-V, 
Приобрести продукт корпоративного класса для виртуализации

- Функция отказоустойчивой кластеризации позволяет создавать и управлять отказоустойчивыми кластерами. Когда один узел в выходит из строя, другой начинает работать с минимальным перерывом. Это обеспечивает избыточность и повышает доступность служб и приложений.
- Быстрое развертывание
- Hyper-V позволяет перемещать виртуальных гостей между физическими хостами 
- С помощью Hyper-V можно переносить работающие виртуальные машины без их отключения
- Администрирование упрощается за счет консолидации и централизации всех ресурсов в нескольких местах.

Можно также рассмотреть: VMware vSphere, который также очень часто выбирают для бизнеса.

   
```
- Требуется наиболее производительное бесплатное opensource решение для виртуализации небольшой (20 серверов) инфраструктуры Linux и Windows виртуальных машин
```

KVM
Простой в использовании, легкий, масштабируемый, нетребовательный к ресурсам и довольно функциональный гипервизор.
Оптимален для создания бюджетных виртуальных сред, к примеру, для тестировщиков.

Поскольку гостевые операционные системы взаимодействуют с гипервизором, который интегрирован в ядро Linux, у гостевых операционных систем есть возможность обращаться напрямую к оборудованию без нужды изменения гостевой операционной системы. За счет этого замедления работы гостевой операционной системы почти не происходит.

Для удобного управления виртуальными машинами можно дополнительно установить пакет Virt-Manager.

Xen можно было бы выбрать, но KVM по умолчанию встроен в ядро Linux, а для работы Xen нам понадобиться специально собранное ядро с его поддержкой (хотя опять же в дистрибутивах Linux (RedHat, Ubuntu, Debian ..) можно включить такую поддержку).

```

Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры
```
 Free Microsoft Hyper-V (бесплатная версия).

Windows Hyper-V Server — это бесплатная серверная версия гипервизора от Microsoft, которую можно использовать для запуска виртуальных машин.

Free Hyper-V Server 2019 — подходит специально для тех, кто не хочет платить за систему аппаратной виртуализации. Никаких ограничений на процедуры и при этом он абсолютно бесплатный. 


```
Необходимо рабочее окружение для тестирование программного продукта на нескольких дистрибутивах Linux
```
Можно посмотреть в сторону гипервизоров второго типа: 
Oracle VM VirtualBox - бесплатный, универсальный.
VMware Workstation (В отличие от VirtualBox, которая распространяется с открытым исходным кодом, VMware - коммерческий продукт, полная версия которого стоит денег. Но для домашнего/тестового использования есть упрощенная версия, которую можно использовать полностью бесплатно.)

Кроме того под Linux много "родных" гипервизоров (правда тут потребуются некоторые навыки работы в командной строке):
KVM + графический интерфейс Virt-Manager
QEMU + графический интерфейс GNOME BOXES

```

---

#### Задача 2

Опишите сценарий миграции с VMware vSphere на Hyper-V для Linux и Windows виртуальных машин. Детально опишите необходимые шаги для использования всех преимуществ Hyper-V для Windows.


***Ответ:***

Если коротко: 

   - завершить работу виртуальной машины (VM) VMware, 
   - Выбираем VM провести ее преобразование с помощью мастера или конвертера 
   - импортировать машину в Hyper-V
    
Более подробно:
    
- Щелкните Виртуальные машины (VM) и службы > Главная > Создать > Создать виртуальные машины > Преобразовать виртуальную машину.
- На странице Мастер преобразования виртуальной машины > Выбор источника нажмите кнопку 'Обзор', а затем на странице 'Выбор источника виртуальной машины' выберите виртуальные машины VMware, которые нужно преобразовать.
- На странице 'Указание удостоверения виртуальной машины' измените имя и описание машины требуемым образом.
- На странице 'Конфигурация виртуальной машины' укажите число процессоров и параметры памяти.
- В окне Выбор узла выберите узел Hyper-V или Azure Stack HCI для размещения. 
- На странице 'Выбор пути' настройте место хранения файлов виртуальной машины на узле. 
- На странице 'Выбор сетей' выберите логическую сеть, виртуальную сеть и виртуальную локальную сеть, если это необходимо. В списке приводятся сети, настроенные в физических адаптерах узла.
- На странице 'Добавить свойства' настройте параметры. 
- На странице 'Сводка' проверьте параметры и при необходимости установите флажок Запустить виртуальную машину после развертывания. Чтобы начать преобразование, нажмите кнопку Создать. 
- Проверьте, была ли виртуальная машина преобразована, выбрав Виртуальные машины (VM) и службы > Главная > Показать > Виртуальные машины.
    
    
    
    Нашел статью: Преобразование виртуальной машины VMware в узел Hyper-V в структуре VMM :
    https://docs.microsoft.com/ru-ru/system-center/vmm/vm-convert-vmware?view=sc-vmm-2019
    
   

---

#### Задача 3

Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был бы выбор, то создавали ли вы бы гетерогенную среду или нет? Мотивируйте ваш ответ примерами.

***Ответ:***

 Проблемы гетерогенной среды. Главная проблема - это сложность такой системы, а именно:
 
 - сложность управления разными средами. 
 - сложность в масшабировании такой системы. 
 - проблемы перемещения данных между разными средами.
 - проблема защиты данных в разных средах.
 - проблемы совместимости технологий реализованных в той или иной среде виртуализации.
 - финансовые затраты (содержание большого штата инженеров и администраторов и их обучение/сертификация, закупка/продление лицензий и пакетов техподдержки для коммерческих сред виртуализации)
 - сложность выделения ресурсов в такой системе.
 
"создавали ли вы бы гетерогенную среду или нет?"

Все зависит от сценария использования, но в большинстве случаев выбирается и используется одна система виртуализации (к примеру, VMware vSphere, Hyper-V)

т.к. ей проще упралять, масштабировать, защищать, делать бэкапы и т.д., у нас один центр управления с набором понятных инструментов.

Однако в рамках импортозамещения могут встречаться гетерогенные среды, например, когда вместе с Hyper-V еще добавлялась система виртуализации для Linux-машин, типа "ПК-Брест" (почти как Opennebula) (от AstraLinux), но это было так сказать против воли заказчика ))

---

